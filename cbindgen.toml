# cbindgen configuration for Plasma C API
# This generates the C header file from Rust FFI code

language = "C"
header = """/* Plasma Cache C API
 *
 * Thread-safe C API for integrating Plasma cache into external toolchains.
 *
 * ## Example Usage
 *
 * ```c
 * #include "plasma.h"
 * #include <stdio.h>
 *
 * int main() {
 *     // Initialize cache
 *     PlasmaCache *cache = plasma_cache_init("/tmp/plasma-cache");
 *     if (!cache) {
 *         fprintf(stderr, "Failed to initialize cache: %s\\n", plasma_last_error());
 *         return 1;
 *     }
 *
 *     // Store artifact
 *     const char *data = "Hello, World!";
 *     const char *hash = "abc123def456";
 *     if (plasma_cache_put(cache, hash, (const uint8_t*)data, 13) != PLASMA_OK) {
 *         fprintf(stderr, "Failed to put: %s\\n", plasma_last_error());
 *     }
 *
 *     // Check existence
 *     int exists = 0;
 *     if (plasma_cache_exists(cache, hash, &exists) == PLASMA_OK) {
 *         printf("Artifact exists: %d\\n", exists);
 *     }
 *
 *     // Retrieve artifact
 *     uint8_t buffer[1024];
 *     size_t bytes_read = 0;
 *     if (plasma_cache_get(cache, hash, buffer, sizeof(buffer), &bytes_read) == PLASMA_OK) {
 *         printf("Retrieved %zu bytes\\n", bytes_read);
 *     }
 *
 *     // Cleanup
 *     plasma_cache_free(cache);
 *     return 0;
 * }
 * ```
 *
 * ## Memory Management
 *
 * - All cache handles must be freed with `plasma_cache_free()`
 * - Error strings are owned by the library and should not be freed
 * - All functions are thread-safe
 *
 * ## Error Handling
 *
 * All functions return error codes. Use `plasma_last_error()` to get
 * the error message for the current thread.
 *
 * Copyright (c) 2025 Plasma
 * Licensed under MIT License
 */"""

include_guard = "PLASMA_H"
autogen_warning = "/* Warning: This file is auto-generated by cbindgen. Do not modify. */"
pragma_once = true
include_version = true
tab_width = 4
documentation = true
documentation_style = "c"

[export]
include = ["PlasmaCache"]
prefix = "Plasma"

[export.rename]
"PlasmaCache" = "PlasmaCache"

[fn]
prefix = "plasma_"
rename_args = "GeckoCase"

[defines]
"target_os = windows" = "PLASMA_WINDOWS"
"target_os = macos" = "PLASMA_MACOS"
"target_os = linux" = "PLASMA_LINUX"

[parse]
parse_deps = false
include = ["plasma"]
clean = false
